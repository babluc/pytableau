import pygwalker as pyg
import pandas as pd
import streamlit.components.v1 as components
import streamlit as st
 
# Adjust the width of the Streamlit page
st.set_page_config(
    page_title="Pygwalker by Leveling Up Data!",
    layout="wide"
)
 
# Add Title
st.title("Pygwalker by Leveling Up Data!")
 
# Import your data
df = pd.read_csv("https://kanaries-app.s3.ap-northeast-1.amazonaws.com/public-datasets/bike_sharing_dc.csv")
 
# Paste the copied Pygwalker chart code here
vis_spec = r"""{"config":"[{\"visId\":\"gw_OAaJ\",\"name\":\"Chart 1\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_kePF\",\"fid\":\"GW_134F5I1A28\",\"name\":\"date\",\"basename\":\"date\",\"semanticType\":\"temporal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_O97x\",\"fid\":\"GW_8FAUTAFA52O\",\"name\":\"month\",\"basename\":\"month\",\"semanticType\":\"ordinal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_b14I\",\"fid\":\"GW_1R6AE0LVJFSXC\",\"name\":\"season\",\"basename\":\"season\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_4gYn\",\"fid\":\"GW_1BBA6IQGC0\",\"name\":\"year\",\"basename\":\"year\",\"semanticType\":\"ordinal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_nDg_\",\"fid\":\"GW_BAKKITGENAYDKG\",\"name\":\"holiday\",\"basename\":\"holiday\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_o-Ei\",\"fid\":\"GW_1EA5218PV0Y1MYYOHRFD0CCI3OW\",\"name\":\"work yes or not\",\"basename\":\"work yes or not\",\"semanticType\":\"ordinal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_o_bE\",\"fid\":\"GW_22X4ZRCC5O4FUDKG\",\"name\":\"am or pm\",\"basename\":\"am or pm\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_-RSH\",\"fid\":\"GW_SSD6TPW7PF6GR99V6OH441C6Y8\",\"name\":\"Day of the week\",\"basename\":\"Day of the week\",\"semanticType\":\"quantitative\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_mea_key_fid\",\"fid\":\"gw_mea_key_fid\",\"name\":\"Measure names\",\"analyticType\":\"dimension\",\"semanticType\":\"nominal\"}],\"measures\":[{\"dragId\":\"gw_pgm5\",\"fid\":\"GW_14PB7VG374\",\"name\":\"hour\",\"basename\":\"hour\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_wR1S\",\"fid\":\"GW_OU2NNYUF526UM4N5T4XC\",\"name\":\"temperature\",\"basename\":\"temperature\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_8YKT\",\"fid\":\"GW_4BD4VXTFLWPCBNU3CP604W\",\"name\":\"feeling_temp\",\"basename\":\"feeling_temp\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_mLB3\",\"fid\":\"GW_28BTNDV55877F2UO\",\"name\":\"humidity\",\"basename\":\"humidity\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_7V6c\",\"fid\":\"GW_2JTS921YL9JS5B1S\",\"name\":\"winspeed\",\"basename\":\"winspeed\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_6woM\",\"fid\":\"GW_1IENDDF0AB38W\",\"name\":\"casual\",\"basename\":\"casual\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_GWSt\",\"fid\":\"GW_3FKGZOVLAUQ2KI1LPV4\",\"name\":\"registered\",\"basename\":\"registered\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_xAqF\",\"fid\":\"GW_7NL4CV2YF5C\",\"name\":\"count\",\"basename\":\"count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}},{\"dragId\":\"gw_mea_val_fid\",\"fid\":\"gw_mea_val_fid\",\"name\":\"Measure values\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"}],\"rows\":[{\"dragId\":\"gw_3gob\",\"fid\":\"GW_3FKGZOVLAUQ2KI1LPV4\",\"name\":\"registered\",\"basename\":\"registered\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"}],\"columns\":[{\"dragId\":\"gw_jLqV\",\"fid\":\"GW_SSD6TPW7PF6GR99V6OH441C6Y8\",\"name\":\"Day of the week\",\"basename\":\"Day of the week\",\"semanticType\":\"quantitative\",\"analyticType\":\"dimension\"}],\"color\":[{\"dragId\":\"gw_1BPo\",\"fid\":\"GW_1R6AE0LVJFSXC\",\"name\":\"season\",\"basename\":\"season\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[],\"text\":[]},\"config\":{\"defaultAggregated\":false,\"geoms\":[\"bar\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}},{\"visId\":\"gw_RU-q\",\"name\":\"Chart 2\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_p85V\",\"fid\":\"GW_134F5I1A28\",\"name\":\"date\",\"basename\":\"date\",\"semanticType\":\"temporal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_IaCQ\",\"fid\":\"GW_8FAUTAFA52O\",\"name\":\"month\",\"basename\":\"month\",\"semanticType\":\"ordinal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_QSal\",\"fid\":\"GW_1R6AE0LVJFSXC\",\"name\":\"season\",\"basename\":\"season\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_ThV0\",\"fid\":\"GW_1BBA6IQGC0\",\"name\":\"year\",\"basename\":\"year\",\"semanticType\":\"ordinal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_XSbr\",\"fid\":\"GW_BAKKITGENAYDKG\",\"name\":\"holiday\",\"basename\":\"holiday\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_CeLN\",\"fid\":\"GW_1EA5218PV0Y1MYYOHRFD0CCI3OW\",\"name\":\"work yes or not\",\"basename\":\"work yes or not\",\"semanticType\":\"ordinal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_uqQ6\",\"fid\":\"GW_22X4ZRCC5O4FUDKG\",\"name\":\"am or pm\",\"basename\":\"am or pm\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_1j13\",\"fid\":\"GW_SSD6TPW7PF6GR99V6OH441C6Y8\",\"name\":\"Day of the week\",\"basename\":\"Day of the week\",\"semanticType\":\"quantitative\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_mea_key_fid\",\"fid\":\"gw_mea_key_fid\",\"name\":\"Measure names\",\"analyticType\":\"dimension\",\"semanticType\":\"nominal\"}],\"measures\":[{\"dragId\":\"gw_DRdv\",\"fid\":\"GW_14PB7VG374\",\"name\":\"hour\",\"basename\":\"hour\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_Qlv5\",\"fid\":\"GW_OU2NNYUF526UM4N5T4XC\",\"name\":\"temperature\",\"basename\":\"temperature\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_LXWt\",\"fid\":\"GW_4BD4VXTFLWPCBNU3CP604W\",\"name\":\"feeling_temp\",\"basename\":\"feeling_temp\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_1AbA\",\"fid\":\"GW_28BTNDV55877F2UO\",\"name\":\"humidity\",\"basename\":\"humidity\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_8FcQ\",\"fid\":\"GW_2JTS921YL9JS5B1S\",\"name\":\"winspeed\",\"basename\":\"winspeed\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_PrHc\",\"fid\":\"GW_1IENDDF0AB38W\",\"name\":\"casual\",\"basename\":\"casual\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_sfTT\",\"fid\":\"GW_3FKGZOVLAUQ2KI1LPV4\",\"name\":\"registered\",\"basename\":\"registered\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_TNld\",\"fid\":\"GW_7NL4CV2YF5C\",\"name\":\"count\",\"basename\":\"count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}},{\"dragId\":\"gw_mea_val_fid\",\"fid\":\"gw_mea_val_fid\",\"name\":\"Measure values\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"}],\"rows\":[],\"columns\":[],\"color\":[],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[],\"text\":[]},\"config\":{\"defaultAggregated\":true,\"geoms\":[\"auto\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}}]","chart_map":{},"version":"0.3.11"}"""
 
# Generate the HTML using Pygwalker
pyg_html = pyg.to_html(df)
 
# Embed the HTML into the Streamlit app
components.html(pyg_html, height=1000, scrolling=True)